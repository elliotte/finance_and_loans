function upDateTrnPaid(e){if(id=$(e).data("trn-id"),1==confirm(confirmText)){var t=$("meta[name='csrf-token']").attr("content"),a=new XMLHttpRequest;a.onload=successPaid,data={id:id},a.open("put","/transactions/"+id+"/invoice_paid",!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("X-CSRF-Token",t),a.send(JSON.stringify(data))}}function successPaid(){if(_trn=JSON.parse(this.responseText),_trn.paid){cellString="#"+_trn.id+"-paid-button-cell",$(cellString).html("Yes");var e='<p style="color:#f3655e;">Success; Invoice marked as Paid : <a href="'+_trn.invoice_file_link+'" target="_blank"style="text-decoration:none;"> View Invoice</a></p>';updateGoogleFileTitle(_trn.id),$(".notice").html("<div>"+e+"</div>")}else console.log("updated trn not paid per JS CHECK")}function updateGoogleFileTitle(e){var t=$("meta[name='csrf-token']").attr("content"),a=new XMLHttpRequest;a.onload=successFileInvPaid,data={trnID:e},a.open("put","/transactions/"+e+"/update_invoice_file_paid",!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("X-CSRF-Token",t),a.send(JSON.stringify(data))}function successFileInvPaid(){if("ERROR"==this.responseText)$(".notice").html("<p>AUTH ERROR</p>"),window.location.href="/";else{file=JSON.parse(this.responseText);var e='<p style="color:#f3655e;">AND: invoice updated: <a href="'+file.alternateLink+'" target="_blank"style="text-decoration:none;"> View Invoice</a></p>';$(".notice").html("<div>"+e+"</div>")}}var ready;ready=function(){salesLedgerShow.drawCharts()},$(document).ready(ready),$(document).on("page:load",ready);var salesLedgerShow=function(){return{drawCharts:function(){data=this.loadData(),graphHelper.drawCharts(data)},loadData:function(){var e=[["Desc","Amount",{role:"annotation"}]],t=$(".sales-trn-line");for(i=0;i<t.length;i++){var a=$(t[i]).data("inv-date"),n=$(t[i]).data("inv-desc"),o=parseFloat($(t[i]).data("inv-amt"));e.push([n,o,a])}return e}}}(),confirmText="Please be sure, this cannot be reversed without special assistance.. as part of our business ledger control procedures";